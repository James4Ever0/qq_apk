!function(){function x(a){return""===d?a:(a=a.charAt(0).toUpperCase()+a.substr(1),d+a)}var a=Math,b=function(a){return a>>0},c=document,d=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",e=c.createElement("div").style,f=/android/gi.test(navigator.appVersion),g=/iphone|ipad/gi.test(navigator.appVersion),h=/playbook/gi.test(navigator.appVersion),i=/hp-tablet/gi.test(navigator.appVersion),j="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,k="ontouchstart"in window&&!i,l=d+"Transform"in document.documentElement.style,m=x("transition")in e,n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,17)}}(),o=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),p="onorientationchange"in window?"orientationchange":"resize",q=k?"touchstart":"mousedown",r=k?"touchmove":"mousemove",s=k?"touchend":"mouseup",t=k?"touchcancel":"mouseup",u="translate"+(j?"3d(":"("),v=j?",0)":")",w=function(a,b){var e=this,f;e.wrapper="object"==typeof a?a:c.getElementById(a),e.wrapper.style.overflow="hidden",e.scroller=e.wrapper.children[0],e.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!0,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(f in b)e.options[f]=b[f];e.x=e.options.x,e.y=e.options.y,e.options.useTransform=l?e.options.useTransform:!1,e.options.hScrollbar=e.options.hScroll&&e.options.hScrollbar,e.options.vScrollbar=e.options.vScroll&&e.options.vScrollbar,e.options.useTransition=m&&e.options.useTransition,e.scroller.style[d+"TransitionProperty"]=e.options.useTransform?"-"+d.toLowerCase()+"-transform":"top left",e.scroller.style[d+"TransitionDuration"]="0",e.scroller.style[d+"TransformOrigin"]="0 0",e.options.useTransition&&(e.scroller.style[d+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),e.options.useTransform?e.scroller.style[d+"Transform"]=u+e.x+"px,"+e.y+"px"+v:e.scroller.style.cssText+=";position:absolute;top:"+e.y+"px;left:"+e.x+"px",e.refresh(),e._bind(p,window),e._bind(q),k||e._bind("mouseout",e.wrapper)};e=null,w.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,handleEvent:function(a){var b=this;switch(a.type){case q:if(!k&&0!==a.button)return;b._start(a);break;case r:b._move(a);break;case s:case t:b._end(a);break;case p:b._resize();break;case"mouseout":b._mouseout(a);break;case"webkitTransitionEnd":b._transitionEnd(a)}},_resize:function(){this.refresh()},_pos:function(a,c){a=this.hScroll?a:0,c=this.vScroll?c:0,this.options.useTransform?this.scroller.style[d+"Transform"]=u+a+"px,"+c+"px"+v+" scale("+this.scale+")":(a=b(a),c=b(c),this.scroller.style.left=a+"px",this.scroller.style.top=c+"px"),this.x=a,this.y=c},_start:function(a){var b=this,c=k?a.touches[0]:a,e,f,g;b.enabled&&(b.options.onBeforeScrollStart&&b.options.onBeforeScrollStart.call(b,a),b.options.useTransition&&b._transitionTime(0),b.moved=!1,b.animating=!1,b.zoomed=!1,b.distX=0,b.distY=0,b.absDistX=0,b.absDistY=0,b.dirX=0,b.dirY=0,b.options.momentum&&(b.options.useTransform?(e=getComputedStyle(b.scroller,null)[d+"Transform"].replace(/[^0-9-.,]/g,"").split(","),f=1*e[4],g=1*e[5]):(f=1*getComputedStyle(b.scroller,null).left.replace(/[^0-9-]/g,""),g=1*getComputedStyle(b.scroller,null).top.replace(/[^0-9-]/g,"")),(f!=b.x||g!=b.y)&&(b.options.useTransition?b._unbind("webkitTransitionEnd"):o(b.aniTime),b.steps=[],b._pos(f,g))),b.startX=b.x,b.startY=b.y,b.pointX=c.pageX,b.pointY=c.pageY,b.startTime=a.timeStamp||Date.now(),b.options.onScrollStart&&b.options.onScrollStart.call(b,a),b._bind(r),b._bind(s),b._bind(t))},_move:function(b){if(window.M&&M.slide_h)return!1;var c=this,d=k?b.touches[0]:b,e=d.pageX-c.pointX,f=d.pageY-c.pointY,g=c.x+e,h=c.y+f,i=b.timeStamp||Date.now();c.options.onBeforeScrollMove&&c.options.onBeforeScrollMove.call(c,b),c.pointX=d.pageX,c.pointY=d.pageY,(g>0||g<c.maxScrollX)&&(g=c.options.bounce?c.x+e/2:g>=0||c.maxScrollX>=0?0:c.maxScrollX),(h>0||h<c.maxScrollY)&&(h=c.options.bounce?c.y+f/2:h>=0||c.maxScrollY>=0?0:c.maxScrollY),c.distX+=e,c.distY+=f,c.absDistX=a.abs(c.distX),c.absDistY=a.abs(c.distY),c.absDistX<6&&c.absDistY<6||(c.options.lockDirection&&(c.absDistX>c.absDistY+5?(h=c.y,f=0):c.absDistY>c.absDistX+5&&(g=c.x,e=0)),c.moved=!0,c._pos(g,h),c.dirX=e>0?-1:0>e?1:0,c.dirY=f>0?-1:0>f?1:0,i-c.startTime>300&&(c.startTime=i,c.startX=c.x,c.startY=c.y),c.options.onScrollMove&&c.options.onScrollMove.call(c,b))},_end:function(c){if(!k||0==c.touches.length){var d=this,e=k?c.changedTouches[0]:c,f,g,h={dist:0,time:0},i={dist:0,time:0},j=(c.timeStamp||Date.now())-d.startTime,l=d.x,m=d.y,n;if(d._unbind(r),d._unbind(s),d._unbind(t),d.options.onBeforeScrollEnd&&d.options.onBeforeScrollEnd.call(d,c),!d.moved){if(k){for(f=e.target;1!=f.nodeType;)f=f.parentNode;"SELECT"!=f.tagName&&"INPUT"!=f.tagName&&"TEXTAREA"!=f.tagName&&(g=document.createEvent("MouseEvents"),g.initMouseEvent("click",!0,!0,c.view,1,e.screenX,e.screenY,e.clientX,e.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),g._fake=!0,f.dispatchEvent(g))}return d._resetPos(200),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,c),void 0}if(300>j&&d.options.momentum&&(h=l?d._momentum(l-d.startX,j,-d.x,d.scrollerW-d.wrapperW+d.x,d.options.bounce?d.wrapperW:0):h,i=m?d._momentum(m-d.startY,j,-d.y,d.maxScrollY<0?d.scrollerH-d.wrapperH+d.y:0,d.options.bounce?d.wrapperH:0):i,l=d.x+h.dist,m=d.y+i.dist,(d.x>0&&l>0||d.x<d.maxScrollX&&l<d.maxScrollX)&&(h={dist:0,time:0}),(d.y>0&&m>0||d.y<d.maxScrollY&&m<d.maxScrollY)&&(i={dist:0,time:0})),h.dist||i.dist)return n=a.max(a.max(h.time,i.time),10),d.scrollTo(b(l),b(m),n),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,c),void 0;d._resetPos(200),d.options.onTouchEnd&&d.options.onTouchEnd.call(d,c)}},_resetPos:function(a){var b=this,c=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,d=b.y>=0||b.maxScrollY>0?0:b.y<b.maxScrollY?b.maxScrollY:b.y;return c==b.x&&d==b.y?(b.moved&&(b.options.onScrollEnd&&b.options.onScrollEnd.call(b),b.moved=!1),void 0):(b.scrollTo(c,d,a||0),void 0)},_mouseout:function(a){var b=a.relatedTarget;if(!b)return this._end(a),void 0;for(;b=b.parentNode;)if(b==this.wrapper)return;this._end(a)},_transitionEnd:function(a){var b=this;a.target==b.scroller&&(b._unbind("webkitTransitionEnd"),b._startAni())},_startAni:function(){var b=this,c=b.x,d=b.y,e=Date.now(),f,g,h;if(!b.animating){if(!b.steps.length)return b._resetPos(400),void 0;if(f=b.steps.shift(),f.x==c&&f.y==d&&(f.time=0),b.animating=!0,b.moved=!0,b.options.useTransition)return b._transitionTime(f.time),b._pos(f.x,f.y),b.animating=!1,f.time?b._bind("webkitTransitionEnd"):b._resetPos(0),void 0;h=function(){var i=Date.now(),j,k;return i>=e+f.time?(b._pos(f.x,f.y),b.animating=!1,b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b),b._startAni(),void 0):(i=(i-e)/f.time-1,g=a.sqrt(1-i*i),j=(f.x-c)*g+c,k=(f.y-d)*g+d,b._pos(j,k),b.animating&&(b.aniTime=n(h)),void 0)},h()}},_transitionTime:function(a){this.scroller.style[d+"TransitionDuration"]=a+"ms"},_momentum:function(c,d,e,f,g){var h=6e-4,i=a.abs(c)/d,j=i*i/(2*h),k=0,l=0;return c>0&&j>e?(l=g/(6/(j/i*h)),e+=l,i=i*e/j,j=e):0>c&&j>f&&(l=g/(6/(j/i*h)),f+=l,i=i*f/j,j=f),j*=0>c?-1:1,k=i/h,{dist:j,time:b(k)}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;return{left:b,top:c}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var a=this;a.scroller.style[d+"Transform"]="",a._unbind(p,window),a._unbind(q),a._unbind(r),a._unbind(s),a._unbind(t),a._unbind("mouseout",a.wrapper),a.options.useTransition&&a._unbind("webkitTransitionEnd"),a.options.onDestroy&&a.options.onDestroy.call(a)},refresh:function(){var a=this,b;a.wrapperW=a.wrapper.clientWidth,a.wrapperH=a.wrapper.clientHeight,a.scrollerW=a.scroller.offsetWidth,a.scrollerH=a.scroller.offsetHeight,a.maxScrollX=a.wrapperW-a.scrollerW,a.maxScrollY=a.wrapperH-a.scrollerH,a.dirX=0,a.dirY=0,a.hScroll=a.options.hScroll&&a.maxScrollX<0,a.vScroll=a.options.vScroll&&(!a.options.bounceLock&&!a.hScroll||a.scrollerH>a.wrapperH),b=a._offset(a.wrapper),a.wrapperOffsetLeft=-b.left,a.wrapperOffsetTop=-b.top,a.scroller.style[d+"TransitionDuration"]="0",a._resetPos(200)},scrollTo:function(a,b,c,d){var e=this,f=a,g,h;for(e.stop(),f.length||(f=[{x:a,y:b,time:c,relative:d}]),g=0,h=f.length;h>g;g++)f[g].relative&&(f[g].x=e.x-f[g].x,f[g].y=e.y-f[g].y),e.steps.push({x:f[g].x,y:f[g].y,time:f[g].time||0});e._startAni()},scrollToElement:function(b,c){var d=this,e;b=b.nodeType?b:d.scroller.querySelector(b),b&&(e=d._offset(b),e.left+=d.wrapperOffsetLeft,e.top+=d.wrapperOffsetTop,e.left=e.left>0?0:e.left<d.maxScrollX?d.maxScrollX:e.left,e.top=e.top>0?0:e.top<d.maxScrollY?d.maxScrollY:e.top,c=void 0===c?a.max(2*a.abs(e.left),2*a.abs(e.top)):c,d.scrollTo(e.left,e.top,c))},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(r),this._unbind(s),this._unbind(t)},enable:function(){this.enabled=!0},stop:function(){o(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1}},"undefined"!=typeof exports?exports.iScroll=w:window.iScroll=w}();