(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1183:function(e,t,a){},1184:function(e,t){e.exports='<div class="teach-block rec-channel"> <p class=teach-block__title>{{block.title}}</p> <ul class=rec-channel__list> <li v-for="(item,index) in block.items" :data-expose-id="item.channelId + \'_\' + (item.navigationId || \'\')"> <div class=rec-channel__item @click=onTap(item,$event)> <span class=rec-channel__item-inner :class="{\'teach__red-mark\':_detectRedMark(item.globalId)}">{{item.hotword}}</span> </div> </li> </ul> </div> '},1185:function(e,t,a){"use strict";a(841)},1186:function(e,t,a){"use strict";a(842)},1187:function(e,t,a){"use strict";a(843)},1188:function(e,t,a){"use strict";a(844)},1189:function(e,t,a){"use strict";a(845)},1190:function(e,t,a){"use strict";a(846)},1191:function(e,t,a){},1192:function(e,t){e.exports=' <div class=official-a v-show=teachObj.items.length> <p class=teach__title>{{title}}</p> <ul class=official-a__list> <li v-for="(item,index) in teachObj.items" v-if="index <8"> <div class=official-a__item :data-index=index @click=onTap> <span class=biz__sug-thumb :style="{backgroundImage:\'url(\' + (item.avatarUrl || item.iconUrl) +  \')\'}"></span> <p>{{item.nickName}}</p> </div> </li> </ul> </div>'},1193:function(e,t,a){"use strict";a(847)},1194:function(e,t,a){"use strict";a(848)},1209:function(e,t,a){"use strict";a.r(t);var i=a(1),o=a.n(i),n=a(0),s=(a(1183),a(20));function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}var c=4,d=5,l=6,h=7,p={template:a(1184),props:["block","typePos"],data:function(){return{}},mixins:[n.k],methods:{_timeAbridge:function(e){return"number"!=typeof(e=+e)?0:Math.floor(e/1e3)},_report:function(e){var t="",a=e.optype,i=!1;try{t=JSON.parse(n.c.queryString.extInfo).globalId}catch(e){}if(a===c)t&&(i=this.block.items.some((function(e){return e.globalId===t})));else if(a===d){if(t)return;(t=n.d.getStore("globalId"))&&(i=this.block.items.some((function(e){return e.globalId===t})))}else i=!0;i&&this._reportCommon(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e))},_reportCommon:function(e){var t=Object.assign({searchreddotreport:1,nettype:n.c.netType,reddottype:0,reddotid:n.d.getStore("globalId"),reddotconsumets:0,optype:0,notshowreason:"",reddotts:n.d.getStore("globalIdTs")||this._timeAbridge(new Date)},e);n.f.reportCommon(n.f.object2params(t))},_storeRedMark:function(){var e="";try{e=JSON.parse(n.c.queryString.extInfo).globalId}catch(e){}e&&(n.d.store("globalId",e),n.d.store("globalIdTs",this._timeAbridge(new Date)))},_detectRedMark:function(e){var t=n.d.getStore("globalId");return!(!t||t!==e)&&(this._report({optype:l,reddotid:t}),!0)},onTap:function(e,t){var a=this;e.optype===s.b.h5?a.M_startDetail({type:2,jumpUrl:e.jumpUrl}):e.optype===s.b.commonSearch?a.M_openSearchWebView({actionType:7,type:0,query:"",scene:e.scene,isSug:0,isHomePage:1,docID:""}):a.M_openSearchWebView({actionType:5,searchId:a.$store.state.teach.recommendId,query:"看一看",type:2,jumpUrl:"",tagPageType:1,extParams:JSON.stringify(Object.assign({tagName:e.hotword,tagId:e.channelId,navigationId:e.navigationId||""},e)),tagId:e.channelId,navigationId:e.navigationId||"",navBarColor:"#FFFFFF",statusBarStyle:"black",nativeConfig:{title:e.headTitle||""},topStoryScene:n.c.queryString.topStoryScene||0});var i=n.d.getStore("globalId");if(e.globalId===i){var o=t.currentTarget.querySelector(".rec-channel__item-inner");o.className=o.className.replace("red-mark",""),n.d.remove("globalId"),this._report({optype:h,reddotid:i,reddotconsumets:a._timeAbridge(new Date)})}n.e.teach.reportRecClick({channelid:e.channelId,navigationid:e.navigationId||"",guidetype:a.block.type,searchid:a.$store.state.teach.recommendId})}},created:function(){this._storeRedMark(),this._report({optype:c}),this._report({optype:d})}},u={mixins:[n.k],props:{block:{type:Object,default:function(){return{}}},typePos:{type:Number,default:0},S_handleBottomStyle:{type:Function,default:function(){}}},data:function(){return{showData:[],isShowAll:!1,isSceneRecommend:n.c.scene===n.b.SCENE_RECOMMEND}},computed:{titleClass:function(){return this.isSceneRecommend?"teach-block__title":"teach__title"}},created:function(){this._handleData()},methods:{_handleData:function(){var e=this,t=e.block.items,a=t&&t.length,i=e.block.showNum||7;a&&(e.isSceneRecommend?(this.isShowAll=t.length>i,this.isShowAll?e.showData=t.slice(0,i):e.showData=t):e.showData=t)},onTap:function(e){var t=this,a={searchId:t.$store.state.teach.recommendId};e.jumpType||(e.jumpType=n.b.jumpType.topStory),e.jumpType===n.b.jumpType.topStory?a=Object.assign(a,{tagPageType:1,extParams:JSON.stringify(Object.assign({tagName:e.hotword,tagId:e.channelId,navigationId:e.navigationId||""},e)),tagId:e.channelId,navigationId:e.navigationId||"",nativeConfig:{title:e.headTitle||""},topStoryScene:n.c.queryString.topStoryScene||0}):e.jumpUrl&&(a.jumpUrl=t.M_composeUrl(e.jumpUrl,{fontRatio:+n.c.queryString.fontRatio||1})),t.M_go(Object.assign({},e,a)),n.e.teach.reportRecClick({channelid:e.channelId,navigationid:e.navigationId||"",guidetype:t.block.type,searchid:t.$store.state.teach.recommendId})},showALL:function(){var e=this;e.isShowAll?(e.showData=e.block.items,e.isShowAll=!1,n.e.teach.reportRecClick({channelid:0,navigationid:"",searchid:e.$store.state.teach.recommendId,guidetype:e.block.type,foldtype:1})):(e.showData=e.block.items.slice(0,e.block.showNum||7),e.isShowAll=!0,n.e.teach.reportRecClick({channelid:0,navigationid:"",searchid:e.$store.state.teach.recommendId,guidetype:e.block.type,foldtype:2})),e.S_handleBottomStyle()}}},m=(a(1185),a(36)),f=Object(m.a)(u,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teach-block rec-category"},[a("p",{class:[e.titleClass]},[e._v(" \n        "+e._s(e.block.title)+" \n    ")]),e._v(" "),a("ul",{staticClass:"rec-category__ul"},e._l(e.showData,(function(t,i){return a("li",{key:i,staticClass:"rec-category__list",attrs:{"data-expose-id":t.channelId+"_"+(t.navigationId||"")}},[a("div",{staticClass:"rec-category__item",attrs:{"data-index":i},on:{click:function(a){return e.onTap(t)}}},[e._v("\n                "+e._s(t.hotword)+"\n            ")])])})),0),e._v(" "),e.isSceneRecommend?a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowAll,expression:"isShowAll"}],staticClass:"rec-category__show arrow_down",on:{click:e.showALL}},[e._v("\n            "+e._s(e.block.moreText)+"\n        ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShowAll,expression:"!isShowAll"}],staticClass:"rec-category__show arrow_top",on:{click:e.showALL}},[e._v("\n            "+e._s(e.block.foldText||"收起")+"\n        ")])]):e._e()])}),[],!1,null,null,null).exports,b=a(860),_=a(23),y={mixins:[n.k,n.i],props:["block","tapCb","typePos"],data:function(){return{isIOS8:n.c.os.ios&&parseInt(n.c.os.version)<9}},methods:{_convertDeletable:function(e){return"ishistorydel=1&"+n.f.object2params(e)},onTap:function(e){var t=this,a=e.currentTarget,i=+n.f.attr(a,"data-index"),o=this.block.items[i],r=o.hotword;if(o.opType=o.optype||o.opType||s.b.search,1==o.opType){var c=t.M_composeParentSid({t:n.b.parentType.TEACH_HISTORY,s:t.$store.state.teach.recommendId,did:o.hotword,rid:t.$store.state.index.requestId});t.M_checkSpecialSearchBeforeLaunchNewSearch({query:r,callback:function(){n.f.setSearchInputWord({query:r,isInputChange:!1}),n.a.$emit(n.b.events.goto,{page:n.c.PAGE_RESULT,query:r,searchId:"",extReqParams:{key:"parentSearchID",textValue:c}})},extParams:{crossExtReqParams:[{key:"parentSearchID",textValue:c}]}})}else 4==o.opType&&t.M_startDetail({type:2,jumpUrl:o.jumpUrl});n.e.teach.reportCommonClick({id:o.id,word:o.hotword,blockType:t.block.type,blockIndex:this.typePos,index:i+1,recommendId:t.$store.state.teach.recommendId}),Object(_.d)(n.j.feature.teachHis),1024===n.c.type&&n.e.reportFictionClick({blockType:this.block.type,pos:i+1,word:o.hotword})},tapDelete:function(e){var t=e.currentTarget,a=+n.f.attr(t,"data-index"),i=this.block.items[a];if(n.f.reportRealTime({scene:n.c.scene,recommendId:this.$store.state.teach.recommendId,businessType:n.c.type,docId:i.hotword,docPos:a,typePos:this.typePos,isHomePage:0,sceneActionType:n.c.sceneActionType}),n.e.teach.reportCommonClick({id:i.id,word:i.hotword,blockType:this.block.type,isDelete:1,blockIndex:this.typePos,index:a+1,recommendId:this.$store.state.teach.recommendId}),1024===n.c.type){var o={scene:n.c.scene,query:i.hotword,businesstype:n.c.type,id:i.id||"",clienttimestamp:(new Date).getTime()};n.f.reportCommon(this._convertDeletable(o)),n.e.reportFictionClick({blockType:this.block.type,pos:a+1,word:i.hotword,isDelete:1})}this.$store.commit("teach/deleteData",{dataIdx:this.typePos-1,itemIdx:a})},tapClear:function(){this.$store.commit("teach/clearData",{key:"history"+n.c.type,dataIdx:this.typePos-1}),n.e.teach.reportCommonClick({id:"删除所有历史",word:this.block.deleteWord,blockType:this.block.type,isDelete:2,recommendId:this.$store.state.teach.recommendId})}}},v=(a(1186),Object(m.a)(y,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.block.items.length?a("div",{staticClass:"history-box"},[a("p",{staticClass:"teach__title"},[e._v("\n        "+e._s(e.block.title)+"\n    ")]),e._v(" "),a("div",{staticClass:"history-box__bd"},[a("ul",[e._l(e.block.items,(function(t,i){return a("li",{directives:[{name:"active",rawName:"v-active"}],key:i,attrs:{"data-index":i,"data-expose-id":t.id},on:{click:e.onTap}},[a("h4",[a("div",{staticClass:"history-box__icon"},[a("svg-icon",{staticClass:"history-box__icon-clock",attrs:{name:"clock"}})],1),e._v(" "),a("p",{staticClass:"history-box__word",class:{is_ios_8:e.isIOS8}},[e._v("\n                        "+e._s(t.hotword)+"\n                    ")]),e._v(" "),t.updateInfo?a("div",[a("span",{staticClass:"history-box__update-info"},[e._v("{ item.updateInfo }}")])]):e._e()]),e._v(" "),t.deletable?a("div",{staticClass:"history-box__delete",attrs:{"data-index":i},on:{touchstart:function(e){e.stopPropagation()},click:function(t){return t.stopPropagation(),e.tapDelete(t)}}},[a("svg-icon",{staticClass:"history-box__delete-svg",attrs:{name:"cross"}})],1):e._e()])})),e._v(" "),e.block.deleteWord?a("li",{staticClass:"history-box__clear",on:{click:e.tapClear}},[a("svg-icon",{staticClass:"history-box__clear-icon",attrs:{name:"trashcan"}}),e._v(" "),a("span",{staticClass:"history-box__clear-text"},[e._v(e._s(e.block.deleteWord))])],1):e._e()],2)])]):e._e()}),[],!1,null,null,null).exports),g=a(44),w=a(149),x=a(64);function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}var O,k={props:{block:{type:Object,default:function(){return{}}},typePos:{type:Number,default:0}},data:function(){return{title:"",path:"",height:"",iconHeight:"80px"}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({showTitle:{get:function(){return this.title||this.block.title},set:function(e){this.title=e}},showPath:{get:function(){return this.path||this.block.iconUrl},set:function(e){this.path=e}}},Object(x.c)({baseInfo:function(e){return e.teach.similar.baseInfo}})),created:function(){var e=this;n.a.$on(n.b.JSApi.emoticonIsChosen,(function(t){e.showTitle="轻触更换表情",t.asyncDownload||(e.showPath=t.thumbPath,e.clearTeachData())})),n.a.$on(n.b.events.appViewChanged,(function(t){t.page!==n.b.page.teach&&(e.showPath="")})),g.b.onImageReady((function(t){t[e.baseInfo.md5]&&(e.showPath=t[e.baseInfo.md5])})),n.e.teach.reportSimilarPlus({reportType:2,requestId:e.baseInfo.requestId,searchId:e.baseInfo.searchId}),window.addEventListener("scroll",e._scroll,!1)},mounted:function(){this.height=this.$refs.button.offsetHeight+"px"},destroyed:function(){window.removeEventListener("scroll",this._scroll)},methods:{_touchStart:function(){O=window.scrollY},_scroll:function(){var e=this,t=window.scrollY,a=window.innerHeight||document.documentElement.clientHeight,i=(window.pageYOffset||document.documentElement.scrollTop)+a,o=e.$root.$el.scrollHeight;if(t<0)e.$refs.button.style.position="absolute";else if(i>o)e.$refs.button.style.position=o==a?"absolute":"fixed";else{var n;if(e.$refs.button.style.position="fixed",O&&(n=t-O),O=t,!n)return;var s=parseInt(e.iconHeight)-n/4,r=parseInt(e.height)-n/4;s=Math.min(s,80),s=Math.max(s,50),r=Math.min(r,180),r=Math.max(r,150),e.iconHeight=s+"px",e.height=r+"px"}},clearTeachData:function(){var e=this.$store.state.teach.teachData;this.$store.dispatch("teach/updateData",{data:Object.assign({},e,{data:[Object.assign({},this.block,{iconUrl:this.showPath,title:"轻触更换表情"})]})})},tap:function(){var e=this;e.$store.dispatch("teach/similar/generateRid"),w.a.gotoEmoticonPad({requestId:e.baseInfo.requestId,sessionId:n.c.sessionId,scene:n.c.scene}),n.e.teach.reportSimilarPlus({reportType:e.baseInfo.md5?3:1,requestId:e.baseInfo.requestId,searchId:e.baseInfo.searchId}),Object(_.d)(n.j.feature.smiliarTapTeach)}}},j=(a(1187),Object(m.a)(k,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"similar-button-wrap",style:{height:e.height}},[a("div",{ref:"button",staticClass:"similar-button"},[a("div",{staticClass:"similar-button__info",on:{click:e.tap}},[a("div",{staticClass:"similar-button__icon-wrap",style:{height:e.iconHeight,width:e.iconHeight}},[e.showPath?a("div",{staticClass:"similar-button__sticker",style:{backgroundImage:"url("+e.showPath+")"}}):a("svg-icon",{staticClass:"similar-button__icon",attrs:{name:"stickers"}})],1),e._v(" "),a("div",{staticClass:"similar-botton__title"},[e._v("\n                "+e._s(e.showTitle)+"\n            ")])])])])}),[],!1,null,null,null).exports);function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}var T={album:1,albumSticker:2,single:3,custom:4},C={props:{emoticon:{type:Object,default:function(){return{}}},pos:{type:Number,default:0}},data:function(){return{}},computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({clientImage:function(){var e=this.emoticon.type;return[T.albumSticker,T.single].indexOf(e)>-1}},Object(x.c)({baseInfo:function(e){return e.teach.similar.baseInfo}})),methods:{tap:function(){var e=this;n.g.openSticker(Object.assign({position:e.pos,docID:e.emoticon.docID,searchId:e.baseInfo.searchId,fromSearchType:2},e.emoticon)),n.e.teach.reportSimilarClick({clickMd5:e.emoticon.md5,queryMd5:e.baseInfo.md5,offset:e.baseInfo.offset,searchId:e.baseInfo.searchId,tab:e.baseInfo.tab,requestId:e.baseInfo.requestId,pos:e.pos}),Object(_.d)(n.j.feature.smiliarTapSticker)}}},D=(a(1188),Object(m.a)(C,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"similar-item",attrs:{"data-expose-id":this.emoticon.md5},on:{click:this.tap}},[t("client-image",{staticClass:"similar-item__inner",attrs:{item:this.emoticon,mode:"sticker"}})],1)}),[],!1,null,null,null).exports),P=a(521);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var R=!1,M={components:{emoticon:D,scroll:P.a},data:function(){return{show:!1,loading:""}},computed:$($({},Object(x.c)({baseInfo:function(e){return e.teach.similar.baseInfo},emoticons:function(e){return e.teach.similar.emoticons},data:function(e){return e.teach.similar.data}})),{},{loadingWord:{get:function(){return this.loading||"加载中..."},set:function(e){this.loading=e}}}),watch:{data:function(e){e.nomoreText&&(this.loadingWord=e.nomoreText)}},created:function(){var e=this;n.a.$on(n.b.JSApi.emoticonIsChosen,(function(t){e.emoticonReset(),e.show=!0,e.$store.commit({type:"teach/similar/updateBase",md5:t.md5,tab:t.tab,aesKey:t.aesKey,emojiUrl:t.emojiUrl}),e.getData({offset:0})})),n.a.$on(n.b.JSApi.onSimilarEmoticonReady,(function(t){R=!1,e.$store.dispatch({type:"teach/similar/dataReady",data:t})})),n.a.$on(n.b.events.appViewChanged,(function(t){t.page!==n.b.page.teach&&(e.emoticonReset(),e.show=!1)}))},methods:{getData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};R=!0;var t=this,a=t.baseInfo,i=a.md5,o=a.offset,s=a.searchId,r=a.requestId,c=a.tab,d=a.aesKey,l=a.emojiUrl,h=Object.assign({md5:i,offset:o,searchId:s,requestId:r,tab:c,aesKey:d,emojiUrl:l,scene:n.c.scene,sessionId:n.c.sessionId},e);w.a.getEmoticon(h)},emoticonReset:function(){this.$store.commit("teach/similar/emoticonReset"),this.loadingWord=""},scrollEnd:function(){R||!this.data.continueFlag&&this.data.items||(this.$store.dispatch("teach/similar/generateRid"),this.getData())},expose:function(e){if(e.length){var t=this,a=[];e.map((function(e){for(var i=0;i<t.emoticons.length;i++){var o=t.emoticons[i];if(o.md5===e){a.push(Object.assign({index:i+1},o));break}}})),n.e.teach.reportSimilarExpose({searchId:t.baseInfo.searchId,md5:t.baseInfo.md5,tab:t.baseInfo.tab,requestId:t.baseInfo.requestId,pos:a[0].index,md5Content:a.map((function(e){return e.md5})).join(";")})}}}},N=(a(1189),Object(m.a)(M,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("scroll",{staticClass:"similar-list",attrs:{end:e.scrollEnd,expose:e.expose,on:e.show}},[a("div",{staticClass:"similar-list__box"},[e.data.resultWording?a("div",{staticClass:"similar-list__count"},[a("span",{staticClass:"similar-list__count-word"},[e._v(e._s(e.data.resultWording))])]):e._e(),e._v(" "),a("div",{staticClass:"similar-list__list"},e._l(e.emoticons,(function(e,t){return a("emoticon",{key:e.docID,attrs:{emoticon:e,pos:t+1}})})),1)]),e._v(" "),a("div",{staticClass:"similar-list__loading"},[e.loading?e._e():a("span",{staticClass:"similar-list_load-icon"}),e._v(" "),a("span",[e._v(e._s(e.loadingWord))])])]):e._e()}),[],!1,null,null,null).exports),q=a(12),A=a(6),L={components:{tags:a(511).a},mixins:[n.i,n.k],props:{teachObj:{type:Object,default:function(){return{}}},type:{type:Number,default:0},typePos:{type:Number,default:0},tapCb:{type:Function,default:function(){}}},data:function(){return{isBizUnionTopScene:A.default.isBizUnionTopScene}},computed:{renderLine:function(){var e=this.teachObj.items.map((function(e){return q.a.strLen(e.hotword)}));return this.M_computedRow(e)}},methods:{onTap:function(e,t){var a=this;if(e.opType=e.optype||e.opType,e.opType==s.b.search){var i=a.M_composeParentSid({t:n.b.parentType.HOT_WORD,s:a.$store.state.teach.recommendId,did:e.id||e.hotword,rid:a.$store.state.index.requestId});a.M_checkSpecialSearchBeforeLaunchNewSearch({query:e.hotword,callback:function(){n.g.setInputBar({query:e.hotword,isInputChange:!1}),n.a.$emit(n.b.events.goto,{page:A.default.PAGE_RESULT,query:e.hotword,action:n.b.teachType.GUIDE_TAB_HOTWORD,searchId:"",extReqParams:{key:"parentSearchID",textValue:i}})},extParams:{crossExtReqParams:[{key:"parentSearchID",textValue:i}]}})}else a.M_go(e);n.e.teach.reportCommonClick({id:e.id,word:e.hotword,blockType:this.teachObj.type,blockIndex:this.typePos,index:t+1,recommendId:this.$store.state.teach.recommendId}),Object(_.d)(n.j.feature.teachHot)}}},U=(a(1190),Object(m.a)(L,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"rows"},[e.teachObj.title?a("p",{staticClass:"teach__title"},[e._v("\n        "+e._s(e.teachObj.title)+"\n    ")]):e._e(),e._v(" "),a("div",{class:e.renderLine},e._l(e.teachObj.items,(function(t,i){return a("div",{key:(""+Math.random()).substr(2,3)+t.hotword,staticClass:"rows__item",attrs:{"data-hotword":t.hotword,"data-index":i,"data-expose-id":t.id},on:{click:function(a){return e.onTap(t,i)}}},[a("span",{staticClass:"hotword"},[e._v(e._s(t.hotword))]),e._v(" "),t.tags?a("tags",{attrs:{tags:t.tags}}):e._e()],1)})),0)])}),[],!1,null,"065b45ba",null).exports);a(1191);var B={template:a(1192),data:function(){return{title:q.a.L("经常搜索的公众号")}},props:["teachObj","type","typePos","tapCb"],methods:{onTap:function(e){var t=e.currentTarget,a=+q.a.attr(t,"data-index"),i=this.teachObj.items[a],o={userName:i.userName,isTeachPage:!0,opType:s.b.bizSession};q.a.startSearchItemDetailPage(o),q.a.reportRealTime({scene:A.default.scene,recommendId:this.$store.state.teach.recommendId,businessType:+this.type,docId:i.userName,docPos:a+1,typePos:this.typePos,isHomePage:0,sceneActionType:A.default.sceneActionType})}}},H=function(e){return"/page/detail/detail?q=".concat(encodeURIComponent(e.join(";")))},W={filters:{formatNum:function(e){if(null==e)return"--";if(!/^(\+|-)?(\d+)(\.\d+)?$/.test(e))return e;var t=RegExp.$1,a=RegExp.$2,i=RegExp.$3,o=new RegExp;for(o.compile("(\\d)(\\d{3})(,|$)");o.test(a);)a=a.replace(o,"$1,$2$3");return"".concat(t).concat(a).concat(i)},formatRate:function(e){return null==e?"--":"".concat((100*Math.abs(e)).toFixed(2),"%")}},props:{block:{type:Object,default:function(){return{}}}},computed:{items:function(){return(this.block.wxindex&&this.block.wxindex.group_list||[]).map((function(e){return{gid:e.gid,group_wxindex:e.group_wxindex.map((function(t){if(t.wxindex_str){for(var a=t.wxindex_str.split(","),i=a.length-1;i>=0;i-=1)if(-1!=a[i]){t.currentIndex=+a[i],i>0&&a[i-1]>0?t.rate=(a[i]-a[i-1])/a[i-1]:t.rate=1;break}i<0&&(e.currentIndex=void 0,e.rate=void 0)}else e.currentIndex=void 0,e.rate=void 0;return t}))}}))},showMoreLink:function(){return(this.block.wxindex&&this.block.wxindex.group_list||[]).length<(this.block.wxindex&&this.block.wxindex.total_cnt||0)}},created:function(){var e=this;g.b.onWebviewResume((function(){e.$emit("update")}))},methods:{onSlide:function(e,t,a,i){e>0?e>18&&i.dataset.moved&&(i.style.left="0px",delete i.dataset.moved):(e||t||a||(this.$refs.wxIndexItem||[]).forEach((function(e){e!==i&&(e.style.left="0px",delete e.dataset.moved)})),a?Math.abs(e)>=36?(i.style.left="".concat(-72,"px"),i.dataset.moved=!0):(i.style.left="0px",delete i.dataset.moved):Math.abs(e)>=18&&(i.dataset.moved?i.style.left="-".concat(80,"px"):i.style.left="".concat(Math.max(e,-72),"px")))},onView:function(e){(this.$refs.wxIndexItem||[]).forEach((function(e){e.style.left="0px",delete e.dataset.moved}));var t=this.items[e];if(t){var a=(t.group_wxindex||[]).map((function(e){return e.query}));n.e.teach.reportWxIndex({actionType:1,groupId:t.gid,content:a.join(",")}),n.f.openWeAppPage({userName:"gh_935b85261f35@app",relativeURL:a.length?H(a):"/page/index/index"})}},onDelete:function(e){var t=this.items[e];t&&(n.e.teach.reportWxIndex({actionType:2,groupId:t.gid,content:(t.group_wxindex||[]).map((function(e){return e.query})).join(",")}),n.g.commonCgi({cgiName:g.a.delWxIndex,data:{gid:t.gid,queryList:(t.group_wxindex||[]).map((function(e){return e.query}))}}))},onMore:function(){n.e.teach.reportWxIndex({actionType:3}),n.f.openWeAppPage({userName:"gh_935b85261f35@app",relativeURL:"/page/index/index"})}}},F=(a(1193),Object(m.a)(W,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.items.length?a("div",{staticClass:"wx-index__bd"},[e._m(0),e._v(" "),e._l(e.items,(function(t,i){return a("div",{key:t.gid,staticClass:"wx-index__item"},[a("div",{directives:[{name:"slide",rawName:"v-slide:horizontal",value:e.onSlide,expression:"onSlide",arg:"horizontal"},{name:"active",rawName:"v-active"}],ref:"wxIndexItem",refInFor:!0,staticClass:"wx-index__box",on:{click:function(t){return e.onView(i)}}},e._l(t.group_wxindex,(function(i){return a("div",{key:t.gid+"###"+i.query,staticClass:"wx-index__tr"},[a("div",{staticClass:"wx-index__td"},[e._v("\n                    "+e._s(i.query)+"\n                ")]),e._v(" "),a("div",{staticClass:"wx-index__td"},[e._v("\n                    "+e._s(e._f("formatNum")(i.currentIndex))+"\n                ")]),e._v(" "),a("div",{staticClass:"wx-index__td wx-index__rate",class:{"wx-index__rate_up":i.rate>=0,"wx-index__rate_down":i.rate<0}},[e._v("\n                    "+e._s(e._f("formatRate")(i.rate))+"\n                ")])])})),0),e._v(" "),a("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"wx-index__box-delete",on:{click:function(t){return e.onDelete(i)}}},[e._v("\n            删除\n        ")])])})),e._v(" "),e.showMoreLink?a("div",{directives:[{name:"active",rawName:"v-active"}],staticClass:"wx-index__link",on:{click:e.onMore}},[e._v("\n        进入小程序查看完整历史\n    ")]):e._e()],2):e._e()}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wx-index__tr wx-index__hd"},[t("div",{staticClass:"wx-index__td"},[this._v("\n            最新查询\n        ")]),this._v(" "),t("div",{staticClass:"wx-index__td"},[this._v("\n            最新指数\n        ")]),this._v(" "),t("div",{staticClass:"wx-index__td"},[this._v("\n            日环比\n        ")])])}],!1,null,null,null).exports);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}new(a(25).a)({mpWidget:1,bizProfile:2});var J,V,Y=a(514),K="",Q={data:function(){return{teachType:n.b.teachType,isGlobalTabBizScene:n.c.isGlobalTabBizScene,isShowBottom:!1,bottomStyle:{},isSceneRecommend:n.c.scene===n.b.SCENE_RECOMMEND,teachPart3data:null}},mixins:[n.k],components:{"search-item-1":b.a,official:B,rows:U,history:v,"recommend-channel":p,"recommend-category":f,"similar-button":j,"similar-list":N,"history-mp":function(){return a.e(8).then(a.bind(null,1217))},"wx-index":F},computed:Object(x.c)({teachObjList:function(e){if(e.teach.teachData)return this.base.scene==n.b.SCENE_RECOMMEND?this.recommendExpose():this.commonExpose(),e.teach.teachData.data},tips:function(e){var t=+localStorage.getItem("teachTipsShowTime")||0;return+t>2?"":e.teach.teachData&&e.teach.teachData.tips?(localStorage.setItem("teachTipsShowTime",++t+""),e.teach.teachData.tips||""):""},baseInfo:function(){return this.$store.getters.getBase}}),watch:{teachObjList:function(){n.c.scene===n.b.SCENE_RECOMMEND&&this.handleBottomStyle()},$route:function(e){e.name===n.b.PAGE_TEACH?(this.reset(),this.tryGetData()):this.reset()}},methods:{handleBottomStyle:function(){var e=this;e.isShowBottom=!1,e.$nextTick((function(){var t=window.innerHeight||document.documentElement.clientHeight,a=30;e.$el.offsetHeight+30+30+16<t&&(a=t-e.$el.offsetHeight-46),e.bottomStyle={marginTop:a+"px"},e.isShowBottom=!0}))},reset:function(){this.$store.dispatch("teach/updateData",{data:{data:[],searchID:"reset"}})},handleFromUrlData:function(){var e=this.$router.currentRoute.params.option||{};e.mpData&&(this.teachPart3data=e.mpData)},tapTip:function(){n.e.teach.reportCommonClick({id:"search_teach_tip",isDelete:3,word:this.tips,recommendId:this.$store.state.teach.recommendId});var e=Object.assign({},this.$store.state.teach.teachData);e.tips="",this.$store.commit("teach/updateData",{data:e}),localStorage.setItem("teachTipsShowTime","3")},tryGetData:function(){var e=this.teachPart3data;e?this.$store.dispatch("teach/updateData",{data:{data:e.data,searchID:e.id}}):this.getTeachSearchData()},getTeachSearchData:function(e){K=""+ +new Date+Math.floor(1e5*Math.random());var t=Object.assign(G(G({},this.baseInfo),{},{requestType:n.c.isGlobalTabBizScene&&n.c.isMostSearchBiz?n.c.TEACH_REQUEST_TYPE_LOCAL:n.c.TEACH_REQUEST_TYPE_NET,requestId:K,ignoreCache:!0,guideInfo:""}),e);n.g.getTeach(t),Object(_.e)(n.j.overview.general.getData,{rate:.01}),Object(_.e)(n.j.overview.teach.getData,{rate:.01})},teachSearchDataReadyCallback:spy((function(e){if(n.g.log({msg:"".concat(e.json),level:"info",key:"teachCallback"}),!e.requestId||e.requestId==K){e=e||{};try{J=JSON.parse(e.json)||{}}catch(e){Object(_.e)(n.j.overview.general.JSONParseException,{rate:1}),Object(_.e)(n.j.overview.teach.JSONParseException,{rate:1}),J={}}if(void 0!==J.preSearchSwitch&&this.$store.commit("updateCommon",{preSearchSwitch:J.preSearchSwitch}),0!=J.businessType){e.requestType==n.c.TEACH_REQUEST_TYPE_LOCAL&&(J.searchID="h5SearchId_"+ +new Date+Math.floor(1e3*Math.random()));var t=[],a="";if(J.data&&J.data.length){this.$store.dispatch("teach/updateData",{data:J});for(var i=0,o=J.data.length;i<o;i++){var s=J.data[i].type||0;if(t.push(s),a+=i>0?";":"",J.data[i].items)for(var r=0,c=J.data[i].items.length;r<c;r++){var d=J.data[i].items[r];a+=(r>0?"|":"")+(""+(d.userName||d.id||d.hotword||"")).replace(/,/g,"_").replace(/\|/g,"#")}}n.f.reportShowTeachKV({logId:n.c.teachShowLogId,scene:n.c.scene,version:n.c.version,isCacheData:e.isCacheData,searchId:J.searchID,businessType:n.c.type,guideType:t.join(";"),result:a})}}}})),tapFeedback:function(){var e="https://support.weixin.qq.com/cgi-bin/mmsupport-bin/readtemplate?t=feedback/index&",t=n.c.queryString,a={deviceName:t.deviceName||"",imei:t.imei||"",deviceBrand:t.deviceBrand||"",deviceModel:t.deviceModel||"",from:"看一看小助手",uin:n.c.sessionId&&n.c.sessionId.split("_")[1],version:t.wechatVersion||"",lang:t.lang||"zh_CN",ostype:t.ostype||"",scene:n.c.scene,timeZone:-(new Date).getTimezoneOffset()/60};e+=n.f.object2params(a)+"#/list/4155",this.M_startDetail({type:2,jumpUrl:e})},recommendExpose:function(){var e=this;V||(V=new Y.Expose((function(t){if(t.length){var a={blockType:[],cid:[],nid:[]};e.teachObjList.reduce((function(e,i){var o={cid:[],nid:[]};i.items.forEach((function(e){var n=e.channelId+"_"+(e.navigationId||"");-1!==t.indexOf(n)&&(-1==a.blockType.indexOf(i.type)&&a.blockType.push(i.type),o.cid.push(e.channelId||""),o.nid.push(e.navigationId||""))})),o.cid.length&&a.cid.push(o.cid.join("_")),o.nid.length&&a.nid.push(o.nid.join("_"))}),a),n.e.reportCommonKv(15775,[a.blockType.join(";"),a.cid.join(";"),a.nid.join(";")])}}),{container:document.querySelector(".teach__box")})),e.$nextTick((function(){V.analysis()}))},commonExpose:function(){var e=this;V||(V=new Y.Expose((function(t){if(t.length){var a={blockType:[],id:[],word:[]};e.teachObjList.reduce((function(e,i){var o={id:[],word:[]};i.items&&i.items.forEach((function(e){var n=e.id;-1!==t.indexOf(n)&&(-1==a.blockType.indexOf(i.type)&&a.blockType.push(i.type),o.id.push(e.id||""),o.word.push(e.hotword||""))})),o.id.length&&a.id.push(o.id.join("_")),o.word.length&&a.word.push(o.word.join("_"))}),a),-1!=t.indexOf("search_teach_tip")&&(a.blockType.unshift(0),a.id.unshift("search_teach_tip"),a.word.unshift(e.tips)),n.e.reportCommonKv(15805,[a.blockType.join(";"),a.id.join(";"),a.word.join(";"),e.base.scene,e.base.type,e.$store.state.teach.recommendId])}}),{container:document.querySelector(".teach__box")})),e.$nextTick((function(){V.analysis()}))}},created:function(){var e=this;n.a.$on(n.b.events.resetQueryString,(function(){this.isGlobalTabBizScene=n.c.isGlobalTabBizScene})),n.a.$on(n.b.events.historyModified,(function(){e.$store.commit("teach/historyModified")})),g.b.onTeachReady((function(t){Object(_.e)(n.j.overview.general.dataReady,{rate:.05}),e.teachSearchDataReadyCallback(t)})),e.handleFromUrlData(),g.b.onCommonCgiReady((function(t){t.cgiName===g.a.delWxIndex&&t.json&&0===t.json.retcode&&t.json.gid&&e.$store.commit("teach/deleteWxIndex",{gid:t.json.gid})})),e.tryGetData(),Object(_.e)(n.j.overview.general.visitTeach,{rate:.05})}},Z=(a(1194),Object(m.a)(Q,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"teach__box"},[e.tips?a("div",{staticClass:"teach__tip",attrs:{"data-expose-id":"search_teach_tip"}},[a("div",{staticClass:"teach__tip-text"},[e._v("\n            "+e._s(e.tips)+"\n        ")]),e._v(" "),a("span",{staticClass:"teach__tip-icon",on:{click:e.tapTip}})]):e._e(),e._v(" "),e._l(e.teachObjList,(function(t,i){return a("div",{key:i,class:{teach__wrap:!e.isSceneRecommend,teach__recommend:e.isSceneRecommend}},[4==t.type?a("rows",{attrs:{type:t.type,"type-pos":i+1,"teach-obj":t}}):e._e(),e._v(" "),2==t.type||11==t.type?a("history",{attrs:{block:t,"type-pos":i+1}}):e._e(),e._v(" "),5==t.type?a("official",{attrs:{type:t.type,"type-pos":i+1,"teach-obj":t}}):e._e(),e._v(" "),8===t.type||10===t.type?a("recommend-channel",{attrs:{block:t,"type-pos":i+1}}):e._e(),e._v(" "),9===t.type?a("recommend-category",{attrs:{block:t,"type-pos":i+1,"S_handle-bottom-style":e.handleBottomStyle}}):e._e(),e._v(" "),1==t.type?a("div",[a("p",{staticClass:"teach__title teach__biz-title"},[e._v("\n                "+e._s(t.title||"公众号")+"\n            ")]),e._v(" "),a("ul",{staticClass:"teach__list"},e._l(t.items,(function(o){return a("search-item-1",{key:o.aliasName,attrs:{item:o,data:t,"type-pos":e.$parent.$index+1,pos:i+1}})})),1)]):e._e(),e._v(" "),t.type===e.teachType.SIMILAR_EMOTICON?a("similar-button",{attrs:{block:t,"type-pos":i+1}}):e._e(),e._v(" "),t.type===e.teachType.HISTORY_MP?a("history-mp",{attrs:{block:t,"type-pos":i+1}}):e._e(),e._v(" "),14===t.type?a("wx-index",{attrs:{block:t},on:{update:e.getTeachSearchData}}):e._e()],1)})),e._v(" "),e.isShowBottom?a("div",{staticClass:"teach__bottom",style:e.bottomStyle},[a("p",{staticClass:"teach__feedback",on:{click:e.tapFeedback}},[e._v("\n            意见反馈\n        ")])]):e._e(),e._v(" "),a("similar-list")],2)}),[],!1,null,null,null));t.default=Z.exports},841:function(e,t,a){},842:function(e,t,a){},843:function(e,t,a){},844:function(e,t,a){},845:function(e,t,a){},846:function(e,t,a){},847:function(e,t,a){},848:function(e,t,a){}}]);