/*! /** 2019.12.26 16:13:15  * / */!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=153)}({10:function(e,t){var r="undefined"!=typeof __TT__GLOBAL__?__TT__GLOBAL__:"undefined"!=typeof window?window:self,n=function(e){var t=e.WeixinNativeBuffer,r=e.getNativeBufferId,n=e.setNativeBuffer,i=(e.getNativeBuffer,e.__wxConfig||{}),o=!1,a=e.WeixinNativeBuffer,u=(e.getNativeBufferId,e.setNativeBuffer,e.getNativeBuffer);e.__wxConfig;o="android"===i.platform||"ios"===i.platform&&null!=t&&i.nativeBufferEnabled;var s=function(e){var i={};return o?i.id=function(e){var i=e.__proto__;e.__proto__=ArrayBuffer.prototype;var o=-1;return t?o=t.new(e):"function"==typeof r&&"function"==typeof n&&(o=r(),n(o,e)),e.__proto__=i,o}(e):i.base64=c(e),i},f=function(e){if(e)if(o&&null!=e.id){if(o)return a.get(e.id);if("function"==typeof u)return u(e.id)}else if(e.base64)return d(e.base64)},l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_=_||function(e){for(var t,r,n=String(e),i="",o=0,a=l;n.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&t>>8-o%1*8)){if(255<(r=n.charCodeAt(o+=.75)))throw new Error('"btoa" failed');t=t<<8|r}return i},c=function(e){for(var t="",r=new Uint8Array(e),n=r.byteLength,i=0;i<n;i++)t+=String.fromCharCode(r[i]);return _(t)},d=function(e){for(var t=function(e){var t=String(e).replace(/=+$/,""),r="";if(t.length%4==1)throw new Error('"atob" failed');for(var n,i,o=0,a=0;i=t.charAt(a++);~i&&(n=o%4?64*n+i:i,o++%4)?r+=String.fromCharCode(255&n>>(-2*o&6)):0)i=l.indexOf(i);return r}(e),r=t.length,n=new Uint8Array(r),i=0;i<r;i++)n[i]=t.charCodeAt(i);return n.buffer},p=function(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]};return delete e.WeixinNativeBuffer,delete e.getNativeBufferId,delete e.setNativeBuffer,delete e.getNativeBuffer,{new:s,get:f,useCompatibleMode:function(e){t&&t.useCompatibleMode(e)},pack:function(e){if(null==e)return e;var t=[];for(var r in e){var n=e[r];void 0!==n&&"ArrayBuffer"===p(n)&&void 0!==n.byteLength&&((o=s(n)).key=r,t.push(o))}if(0<t.length){for(var i=0;i<t.length;i++){var o;delete e[(o=t[i]).key]}e.__nativeBuffers__=t}return e},unpack:function(e){if(null==e||null==e.__nativeBuffers__)return e;var t=e.__nativeBuffers__;delete e.__nativeBuffers__;for(var r=0;r<t.length;r++){var n=t[r];if(null!=n){var i=f(n);void 0!==i&&"ArrayBuffer"===p(i)&&(e[n.key]=i)}}return e}}}(r);r.WeixinNativeBuffer=n,n=null,e.exports={WeixinNativeBuffer:r.WeixinNativeBuffer}},14:function(e,t,r){(function(t){var n=r(2),i=console.error,o={},a=!1,u=void 0!==t&&t.__ttObjdec__||{},s=!1;function f(e,t){if(!o[e]){if(n.isDevtool)return i("can't find module : "+e),a=!1,!1;a=t;try{var r=u.util.loadJS(e,u.__tt__shouldPrintAll__exception?1:0)}catch(t){return a=!1,i("文件"+e+"加载异常(可能是es6的问题)\n",t),!1}return a=!1,0===r||(r<2e5?i("文件"+e+"加载失败(获取路径失败，错误码为"+r+")"):r<3e5?i("文件"+e+"加载失败(获取路径成功，加载js文件失败，错误码为"+r+")"):r<4e5&&i("文件"+e+"加载失败(js库参数错误，错误码为"+r+")"),!1)}return!0}function l(e,t){if(f(e,t)){var r=o[e];if(1===r.status){var n=r.factory,a={exports:{}},u=void 0;try{n&&(u=n(_(e),a,a.exports))}catch(t){return i("文件"+e+"执行出现异常\n",t),void(r.status=3)}r.exports=a.exports||u,r.status=2}return r.exports}}function _(e,t){var r,n=(r=e.match(/(.*)\/([^\/]+)?$/))&&r[1]?r[1]:"./";return function(e){if("string"!=typeof e)throw new Error("require args must be a string");for(var r=[],i=(n+"/"+e).split("/"),o=0,a=i.length;o<a;++o){var u=i[o];if(""!=u&&"."!=u)if(".."==u){if(0==r.length)throw new Error("can't find module : "+e);r.pop()}else o+1<a&&".."==i[o+1]?o++:r.push(u)}try{var s=r.join("/");return/\.js$/.test(s)||(s+=".js"),l(s,t)}catch(e){throw e}}}var c=_("",!0);e.exports={define:function(e,t){if(!o[e]||o[e].__coverEnable__){var r={exports:{},factory:t,status:1};r.__coverEnable__=a,o[e]=r}},require:c,allModules:o,getPreload:function(e){var t,r=(t=e.match(/(.*)\/([^\/]+)?$/))&&t[1]?t[1]:"./";return function(e){if("string"!=typeof e)throw new Error("require args must be a string");for(var t=[],n=(r+"/"+e).split("/"),i=0,o=n.length;i<o;++i){var a=n[i];if(""!=a&&"."!=a)if(".."==a){if(0==t.length)throw new Error("can't find module : "+e);t.pop()}else i+1<o&&".."==n[i+1]?i++:t.push(a)}try{var u=t.join("/");/\.js$/.test(u)||(u+=".js"),f(u)}catch(e){throw e}}},getRequire:_,requirePlugin:function(e){if("string"!=typeof e)throw new Error("requirePlugin args must be a string.");if(!__wxConfig||!__wxConfig.plugins)throw new Error("This application has not registered any plugins yet.");var t=e.match(/([^\/]*)\/?(.*)/);if(!t||t.length<2)throw new Error('Plugin "'+e+'" has not registered.');var r=t[1],i=t[2],o=__wxConfig.plugins[r];if(!o)throw new Error('Plugin "'+e+'" has not registered.');"dev"!==o.version&&n.isIOS&&r.length>0&&function(e){if(!s){if(void 0===_("qqNative/plugin",!0)(e+"/plugin.js"))throw new Error('Plugin "'+e+'" inject fail.');console.log('Plugin "'+e+'" inject success.'),s=!0}}(r);var a="__plugin__/".concat(o.provider);i?a+="/".concat(i):/\.js$/.test(a)||(a+=".js"),l(a)}}}).call(this,r(4))},153:function(e,t,r){window.__tt__start__loadJSSDK=!0;var n=r(2),i=(o="undefined"!=typeof __TT__GLOBAL__?__TT__GLOBAL__:"undefined"!=typeof window?window:self).__ttObjdec__;if(null==i.Triton){i.Triton=Triton;try{Triton=void 0}catch(e){}}if(n.isAndroid){r(31),r(29),r(10),r(154),r(30),(o="undefined"!=typeof __TT__GLOBAL__?__TT__GLOBAL__:"undefined"!=typeof window?window:self).worker=wx.createWorker()}else{var o,a=r(155),u=r(14);(o="undefined"!=typeof __TT__GLOBAL__?__TT__GLOBAL__:"undefined"!=typeof window?window:self).worker=new a.Worker,o.define=u.define,o.require=u.require,o.util=new i.Triton.GlobalUtil,o.setTimeout=function(e,t){return util.setTimeout(e,t||0)},o.setInterval=function(e,t){return util.setInterval(e,t||0)},o.clearTimeout=function(e){return util.clearTimeout(e)},o.clearInterval=function(e){return util.clearInterval(e)}}window.__tt__success__loadJSSDK=!0},154:function(e,t){__TT__GLOBAL__,__TT__GLOBAL__;var r,n,i=__TT__GLOBAL__;__TT__GLOBAL__;r=i.__ttObjdec__,n=void 0,wx.createWorker=function(){return null!=n&&(n.terminate(),n=void 0),n=r.worker}},155:function(e,t,r){var n=[],i=r(10).WeixinNativeBuffer,o="undefined"!=typeof __TT__GLOBAL__?__TT__GLOBAL__:"undefined"!=typeof window?window:self;function a(){this._worker=WeixinWorker}WeixinWorker.appServiceMsgHandler=function(e){var t=i.unpack(e);null!=t.__cmd__&&"requireScript"===t.__cmd__?function(e){if(null==e)throw new Error("worker 入口 undefined");e.startsWith("/")&&(e=e.substring(1)),o.require(e)}(t.__script__):n.forEach(function(e){e(t)})},a.prototype.postMessage=function(e){try{var t=i.pack(e),r=JSON.stringify(t);this._worker.postMsgToAppService(r)}catch(e){console.error("worker->postMessage 出现异常： "+e)}},a.prototype.onMessage=function(e){n.push(e)},e.exports={Worker:a}},2:function(e,t){var r="undefined"!=typeof __wxConfig?__wxConfig.platform:"undefined";e.exports.isIOS="ios"===r,e.exports.isAndroid="android"===r,e.exports.isDevtool="devtools"===r},29:function(e,t){__TT__GLOBAL__;var r,n,i,o=__TT__GLOBAL__;__TT__GLOBAL__;r=o.__ttObjdec__,n=[],i=function(){var e={};return e._worker=new r.Triton.Worker,e.runScript=function(t){e._worker.runScript(t)},e.postMessage=function(t){t=WeixinNativeBuffer.pack(t);var r=JSON.stringify(t);e._worker.postMessage(r)},e.onMessage=function(e){n.push(e)},e.terminate=function(){e._worker.terminate()},e._worker.onMessage(function(e){var t=WeixinNativeBuffer.unpack(e);n.forEach(function(e){e(t)})}),e},r.worker=i()},30:function(e,t){__TT__GLOBAL__;var r=__TT__GLOBAL__;__TT__GLOBAL__;!function(e){r.setTimeout=function(t,r){return r=r||0,e.Triton.MessageQueue.setTimeout(t,r)},r.clearTimeout=function(t){e.Triton.MessageQueue.removeTimeout(t)},r.setInterval=function(t,r){r=r||0;var n={};return n.id=e.Triton.MessageQueue.setTimeout(function i(){n.id=e.Triton.MessageQueue.setTimeout(i,r),t()},r),n},r.clearInterval=function(t){t&&"number"==typeof t.id&&e.Triton.MessageQueue.removeTimeout(t.id)};var t=0,n=new Map,i=new Map;r.requestAnimationFrame=function(e){if("function"==typeof e){var r=t++;return n.set(r,e),r}},r.cancelAnimationFrame=function(e){n.delete(e)},e.Triton.__processAnimateFrame__=function(e){var t=n;n=i;var r=!0,o=!1,a=void 0;try{for(var u,s=t.values()[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){(0,u.value)(e)}}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}t.clear(),i=t}}(r.__ttObjdec__),function(e){var t=!1;function n(){return scriptEngineContextType&&(scriptEngineContextType==CONTEXT_TYPE_MAIN||scriptEngineContextType==CONTEXT_TYPE_OPENDATA)}wx.__tt___changeGameState__=function(e){t=!e},n()&&e.Triton.Director.init(),e.Triton.__onVSync__=function(i){t?n()&&r.q9zq.saveToFile():(n()&&r.q9zq.frameStart(),e.Triton.__processAnimateFrame__(i),n()&&(null!=e.lastMergeCanvas&&(e.lastMergeCanvas.flushImage(),e.lastMergeCanvas=null),e.CommandQueue.Instance.flushCmd()))}}(r.__ttObjdec__),function(e){function t(){return Date.now()}var n=t(),i=function(){return t()-n};r.q9zq={fpIndex:0,funIndex:0,haveCartoned:!1,allFrames:[],lastRecIndex:-1,tempFrameRec:[],frameStartTime:10,mainRec:[],FrameProfileRunning:!1,enableFrameProfile:function(){return e.enableTimeMonitor||this.FrameProfileRunning},FrameProfileStart:function(e){console.log("yuki FrameProfileStart + global.timePerformanceResult："+r.timePerformanceResult),r.timePerformanceResult&&(this.FrameProfileRunning=!0,console.log("yuki FrameProfileStart"),setTimeout(function(){r.timePerformanceResult("",e)},0))},FrameProfileEnd:function(e){if(console.log("yuki FrameProfileEnd global.timePerformanceResult:"+r.timePerformanceResult),r.timePerformanceResult){this.FrameProfileRunning=!1;var t=this.getDataStr();console.log("yuki FrameProfileEnd str:"+t),setTimeout(function(){r.timePerformanceResult(t,e)},0)}},frameStart:function(){this.preFrameEnd(),this.frameStartTime=i(),this.tempFrameRec=[],this.lastRecIndex=-1,this.fpIndex=(this.fpIndex+1)%1e7,this.funIndex=0,this.mainRec=[]},preFrameEnd:function(){this.enableFrameProfile()&&this.lastRecIndex>=0&&(i()-this.frameStartTime>frameDurationThreshold?(this.tempFrameRec.length>this.lastRecIndex+1&&this.tempFrameRec.splice(this.lastRecIndex+1,this.tempFrameRec.length-(this.lastRecIndex+1)),this.allFrames.push({time:this.frameStartTime,list:this.tempFrameRec}),this.haveCartoned=!0):(this.FrameProfileRunning||this.haveCartoned)&&this.allFrames.push({time:this.frameStartTime,list:this.mainRec}));this.tempFrameRec=[],this.lastRecIndex=-1},mainStart:function(e){var t=this.a(e);return this.mainRec.push(this.tempFrameRec[this.lastRecIndex]),t},mainEnd:function(e,t){this.b(e,t),this.lastRecIndex>0&&this.mainRec.push(this.tempFrameRec[this.lastRecIndex])},a:function(e){e.a&&(e=e.a),this.funIndex++;var t=this.fpIndex+"_"+this.funIndex+"_"+e;return this.tempFrameRec[++this.lastRecIndex]={key:e,type:"start",time:i(),callIndex:t},t},b:function(e,t){if(e.a&&(e=e.a),t.s&&!(this.lastRecIndex<0)){var r=i(),n=this.tempFrameRec[this.lastRecIndex];n.callIndex==t.s&&r-n.time<.001?this.lastRecIndex--:this.tempFrameRec[++this.lastRecIndex]={key:e,type:"end",time:i(),callIndex:t.s}}},c:function(e,t){this.b(t,{s:e})},getDataStr:function(){if(0!=this.allFrames.length){for(var e=0;e<this.allFrames.length;e++){var t=this.allFrames[e];if(t.list){for(var r=[],n=[],i=0;i<t.list.length;i++){if("start"==(_=t.list[i]).type)r.push(_),n.push(_);else for(;;){var o=r.pop();if(!o){_.disable=!0,__err("打点数据出现非预期的异常情况(只有end，没有start)");break}if(o.callIndex==_.callIndex){_.searchInfo="searchInfo: "+o.key+"_"+(_&&_.time-o.time),n.push(_);break}o.disable=!0,n.push({key:o.key,type:"end",time:_&&_.time,callIndex:o.callIndex,addedPoint:!0,"searchInfo:":"searchInfo: "+o.key+"_"+(_&&_.time-o.time)+"_exception"})}}for(var a=n[n.length-1]&&n[n.length-1].time,u=r.length-1;u>=0;u--){var s=r[u];s.disable=!0,n.push({key:s.key,type:"end",time:a,callIndex:s.callIndex,addedPoint:!0})}for(var f=[],l=0;l<t.list.length;l++){var _;(_=t.list[l]).disable||f.push(_)}t.list=n}}var c=JSON.stringify(this.allFrames);return this.allFrames=[],this.haveCartoned=!1,c}},saveToFile:function(){var e=this.getDataStr();if(e){if(!this.moniterFileTime){var t=new Date(Date.now()),r=t.getSeconds()+":"+t.getHours()+":"+t.getMinutes();this.moniterFileTime=r,this.moniterFileIndex=0}var n="wxfile://usr/js_time_monitor_"+ ++this.moniterFileIndex+"_"+this.moniterFileTime+".json";wx.getFileSystemManager().writeFile({filePath:n,data:e,success:function(){console.log("save moniter success: "+n)}})}}}}(r.__ttObjdec__)},31:function(e,t){var r=__TT__GLOBAL__;!function(e){var t={};function n(r){t[r]||e.Triton.Script.loadJS(r)}function i(e){var t=e.match(/(.*)\/([^\/]+)?$/);return t&&t[1]?t[1]:"./"}function o(e,t){if("string"!=typeof t)throw new Error("require args must be a string");for(var r=[],n=(e+"/"+t).split("/"),i=0,o=n.length;i<o;++i){var a=n[i];if(""!==a&&"."!==a)if(".."===a){if(0===r.length)throw new Error("can't find module : "+t);r.pop()}else i+1<o&&".."===n[i+1]?i++:r.push(a)}var u=r.join("/");return/\.js$/.test(u)||(u+=".js"),u}function a(e,t){if(1===e.status){var r,n=e.factory,i={exports:{}};n&&(r=n(t,i,i.exports)),e.exports=i.exports||r,e.status=2}}function u(e){var r=i(e);return function(e){return function(e){n(e);var r=t[e];return a(r,u(e)),r.exports}(o(r,e))}}var s,f={},l={};function _(e){var t=l[e];if(void 0===t)throw new Error("can't find plugin "+e);return"__plugin__/"+t}r.__tt__allModules=t,r.define=function(e,r){t[e]||(t[e]={exports:{},factory:r,status:1})},r.definePlugin=function(e,t,r){l[e]=t,r(function(e,t){f[e]||(f[e]={exports:{},factory:t,status:1})})},r.require=u(""),r.requirePlugin=function(t){var r=t.match(/([^\/]+)(\/(.*))?/);if(r){var n=r[1],u=r[3];!function(t){l[t]||e.Triton.Script.loadPlugin(t)}(n);var s=function e(t,r){return function(n){var u;if(void 0!==n){if(!(u=o(i(r),n)).startsWith(_(t)+"/"))throw new Error("invalid plugin file "+t+"/"+n)}else{if(r!==_(t))throw new Error("require args must be a string");u=_(t)+".js"}var s=f[u];if(void 0===s)throw n?new Error("can't find plugin file "+t+" "+n):new Error("can't find plugin "+t);return a(s,e(t,u)),s.exports}}(n,_(n));s(void 0===u?void 0:l[n]+"/"+u)}},r.__tt__preloadjs=(s=i(""),function(e){n(o(s,e))})}(r.__ttObjdec__)},4:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r}});